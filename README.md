# 多线程邀请码提交程序

这个程序将原来的curl命令转换为Python多线程版本，用于批量提交Sora邀请码。

## 功能特点

- **多线程支持**: 可以控制并发线程数量，避免请求过于频繁
- **六位邀请码生成**: 自动生成由大写字母和数字组成的六位随机邀请码
- **去重检测**: 自动检测并避免重复提交已使用过的邀请码
- **智能延时**: 支持在请求间添加延时，避免触发速率限制
- **智能邀请码管理**: 遇到无效邀请码(403)时自动生成新邀请码替换，200状态码时成功结束
- **详细统计**: 显示成功、失败、重复、无效邀请码、限流等各种统计信息

## 使用方法

1. **准备认证令牌**:
   - 在 `auth.txt` 文件中填入你的认证令牌（Bearer token）
   - 例如: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

2. **运行程序**:
   ```python
   python sorainvitecode.py
   ```

3. **自定义参数**:
   ```python
   submit_invite_codes(
       max_workers=3,     # 并发线程数
       delay=0.5,         # 每个请求间的延时（秒）
       used_codes_file="used_codes.txt",  # 已使用邀请码保存文件
       success_file="success.txt",  # 成功邀请码保存文件
       invalid_codes_file="invalid_codes.txt",  # 无效邀请码保存文件
       max_retries=5,     # 最大重试次数
       retry_delay=2.0    # 重试延时（秒）
   )
   ```

## 参数说明

- `max_workers`: 最大并发线程数，建议根据网络状况调整
- `delay`: 每个请求间的延时时间，避免请求过于频繁
- `used_codes_file`: 保存已使用邀请码的文件名（包括成功和失败的）
- `success_file`: 保存成功邀请码的文件名
- `invalid_codes_file`: 保存无效邀请码的文件名
- `max_retries`: 当遇到错误或速率限制时的最大重试次数
- `retry_delay`: 每次重试之间的延时时间

## 运行模式

程序现在支持无限生成和重试模式，会持续运行直到手动停止（Ctrl+C）：

- **无限生成**: 程序会不断生成新的邀请码进行测试
- **智能替换**: 遇到无效邀请码时自动生成新邀请码替换
- **自动重试**: 遇到速率限制或其他错误时自动重试（除403无效邀请码外）
- **进度显示**: 每成功提交10个邀请码显示一次进度
- **实时保存**: 无效邀请码会立即保存到文件中，避免重复使用
- **文件管理**: 三个文件分别保存不同类型的邀请码：
  - `used_codes.txt`: 所有使用过的邀请码
  - `success.txt`: 成功提交的邀请码
  - `invalid_codes.txt`: 无效的邀请码

## 注意事项

- 请确保 `auth.txt` 文件中包含有效的认证令牌
- 程序会自动创建三个文件：`used_codes.txt`、`success.txt` 和 `invalid_codes.txt`
- 如果遇到限流错误，可以增加延时时间或减少线程数
- 程序会自动处理重复邀请码，避免浪费请求
- 当遇到403状态码（无效邀请码）时，程序会立即保存并生成新邀请码替换
- 当遇到429（速率限制）或其他错误时，程序会自动重试（除403外）
- 程序支持无限运行，按 Ctrl+C 可以安全停止程序

## 输出示例

```
开始无限生成并提交邀请码...
线程数: 3
延时: 0.5秒
最大重试次数: 5
重试延时: 2.0秒
已使用邀请码数量: 0
已知无效邀请码数量: 0
按 Ctrl+C 停止程序

[SUCCESS] 邀请码 A1B2C3 提交成功！
[INVALID_CODE] 邀请码 D4E5F6 无效，需要更换
[REPLACE] 邀请码 D4E5F6 无效，用新邀请码 G7H8I9 替换
[SUCCESS] 邀请码 G7H8I9 提交成功！
[RATE_LIMITED] 邀请码 J0K1L2 遇到速率限制，重试中... (尝试 1/5)
[SUCCESS] 邀请码 J0K1L2 提交成功！
[PROGRESS] 已成功提交 10 个邀请码
[PROGRESS] 已成功提交 20 个邀请码

检测到中断信号，正在停止...

====== 程序停止 ======
总运行时间: 125.50秒
成功: 47 个
失败: 3 个
重复: 0 个
无效邀请码: 15 个
限流: 2 个
错误: 1 个
请求错误: 1 个
重试失败: 0 个
总处理邀请码数: 68 个
成功邀请码已保存到: success.txt
使用过的邀请码已保存到: used_codes.txt
无效邀请码已保存到: invalid_codes.txt
```
